#!/bin/sh

echo "Editing crontab to run startup script at reboot"
(crontab -l 2>/dev/null; echo "@reboot /home/pi/kuka-rpi-controller/startup >/home/pi/logs/cronlog 2>&1") | crontab -

echo "Fixing script permissions (git does not retain permissions)"
chmod +x scripts/set-network
chmod +x scripts/startup
chmod +x scripts/gpio-watch-scripts/12

echo "Setting up /etc/network/interfaces files"
#We don't want to accidently override the store default file
line=$(sed '1!d' /etc/network/interfaces)
if [$line != "#KUKA"]
then
    sudo cp /etc/network/interfaces /etc/network/interfaces-default
fi

cd /home/pi/kuka-rpi-controller/setup-files
sudo cp setup-files/interfaces /etc/network/interfaces
sudo cp setup-files/interfaces /etc/network/interfaces-kuka

echo "If Processing is not already installed, it will need to be installed manually"
